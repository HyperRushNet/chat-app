<!-- HyperRush Chat App | 2026 | MIT License -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/5962/5962463.png">
    <title>HyperRush Chat</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .fs-10-fw8-tt-up-ls1,.guest-pill,.guide-box b,.stat-label,.subtitle,.tt-up{text-transform:uppercase}.fs-18-fw8-lh12-ow,.msg-user,.picker-user-name,.room-name,.title{text-overflow:ellipsis}#app,#block-overlay.active,#capacity-overlay.active,#offline-screen.active,.btn,body{display:flex}#app,.screen{background:var(--bg)}.room-name,.title{white-space:nowrap}#loader-overlay,#overlay-container{backdrop-filter:blur(12px);opacity:0}#overlay-container,.screen{display:none;padding:var(--pad);inset:0}#app,.msg-user,.room-name,.title,body{overflow:hidden}#chat-messages,.ovy-auto,.panel-card{overflow-y:auto}:root{--bg:#fff;--surface:#fff;--border:#e2e2e7;--text-main:#1c1c1e;--text-mute:#636366;--accent:#007aff;--danger:#ff3b30;--success:#34c759;--warning:#ff9500;--pad:32px}*{margin:0;padding:0;box-sizing:border-box;font-family:'Plus Jakarta Sans',sans-serif;-webkit-tap-highlight-color:transparent}::-webkit-scrollbar{width:0;height:0}body{height:100dvh;background:#f2f2f7;color:var(--text-main);justify-content:center;align-items:center}#app{width:100%;max-width:440px;height:100%;position:relative;flex-direction:column;box-shadow:0 0 50px rgb(0 0 0 / .1)}#toast-container,.screen{flex-direction:column;position:absolute}#scr-start{background:url('https://img.freepik.com/free-vector/abstract-composition-with-flowing-shapes-soft-gradients_779267-3345.jpg?semt=ais_user_personalization&w=740&q=80') center/cover no-repeat,var(--bg)}.screen{will-change:transform,opacity;padding-top:calc(var(--pad) + 10px);transition:transform .4s cubic-bezier(.16, 1, .3, 1),opacity .4s}.screen.active{display:flex;animation:.2s ease-out instantFade}.screen.slide-left{transform:translateX(-100%);opacity:0}.screen.slide-right{transform:translateX(100%);opacity:0}@keyframes instantFade{from{opacity:0;transform:scale(.98)}to{opacity:1;transform:scale(1)}}.center-content{justify-content:center;align-items:center;text-align:center}.header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding-bottom:20px;border-bottom:1px solid var(--border);margin-bottom:32px;flex-shrink:0;padding-top:8px}.online-indicator,.title{font-weight:800;align-items:center}.online-indicator{display:inline-flex;gap:6px;background:rgba(52,199,89,.1);padding:4px 10px;border-radius:8px;font-size:11px;line-height:1;color:var(--success)!important;flex-shrink:0}.dot{width:6px;height:6px;background:var(--success)!important;border-radius:50%;animation:2s ease-in-out infinite pulse}@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.6;transform:scale(.9)}}.title{font-size:26px;letter-spacing:-.8px;color:#000;margin-bottom:4px;display:flex;justify-content:center;gap:10px}.guide-box b,.subtitle,.view-content.active{display:block}.subtitle{color:var(--text-mute);font-size:12px;font-weight:600;letter-spacing:1.2px;margin-bottom:32px}.btn,.input-field{color:var(--text-main);width:100%}.input-field{background:#f2f2f7;border:1px solid transparent;border-radius:12px;padding:16px;font-size:16px;outline:0;margin-bottom:16px;transition:.2s}.btn,.room-card{transition:.15s;cursor:pointer}.input-field:focus{border-color:var(--accent);background:#fff}.input-field:disabled{opacity:.6;cursor:not-allowed}.btn{height:56px;border-radius:12px;border:1px solid var(--border);background:0 0;font-weight:700;font-size:15px;align-items:center;justify-content:center;gap:10px}.btn-accent{background:var(--text-main);color:#fff;border:none}#scr-start .btn:not(.btn-accent){background:#fff;border:none;color:#000}.btn:active{transform:scale(.97);opacity:.8}.btn:disabled{opacity:.5;cursor:not-allowed;transform:none}#toast-container{top:40px;left:50%;transform:translateX(-50%);z-index:999999;width:85%;pointer-events:none;display:flex;align-items:center}.toast-item{background:rgba(28,28,30,.95);backdrop-filter:blur(22px);color:#fff;padding:14px 22px;border-radius:80px;font-weight:600;font-size:13px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,.2);animation:.25s cubic-bezier(.2,1,.3,1) slideUp;pointer-events:auto;cursor:pointer;width:100%;margin-bottom:8px}.date-label,.empty-state,.history-loader,.loader-text{color:var(--text-mute);text-align:center}@keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}#block-overlay,#capacity-overlay,#offline-screen{position:absolute;inset:0;background:var(--bg);z-index:6000;display:none;flex-direction:column;align-items:center;justify-content:center;padding:var(--pad);text-align:center}#loader-overlay{position:absolute;inset:0;background:rgba(255,255,255,.98);z-index:3500;display:none;align-items:center;justify-content:center;flex-direction:column;gap:12px;transition:opacity .2s}#loader-overlay.active,#overlay-container.active{display:flex;opacity:1}.spinner{width:28px;height:28px;border:3px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:.5s linear infinite spin}@keyframes spin{to{transform:rotate(360deg)}}.loader-text{font-size:13px;font-weight:700;margin-top:4px}.room-card{padding:20px;border-radius:14px;background:#fff;display:flex;align-items:center;justify-content:space-between;border:1px solid var(--border);margin-bottom:12px;width:100%}.room-card:active{transform:scale(.98);background:#f9f9f9}.room-name{flex:1;min-width:0;font-weight:700;margin-right:10px}.date-label,.msg-user,.p-label{font-weight:800;text-transform:uppercase;letter-spacing:.5px}.room-icon{flex-shrink:0;display:flex;align-items:center;gap:5px}#chat-messages{flex:1;display:flex;flex-direction:column;gap:12px;padding:4px;position:relative}.date-divider{position:sticky;top:0;z-index:10;display:flex;align-items:center;justify-content:center;margin:10px 0}.msg,.pos-rel,.switch{position:relative}.date-label{width:25%;margin:0 auto;background:rgba(255,255,255,.9);backdrop-filter:blur(4px);padding:6px 0;border-radius:20px;font-size:11px;border:1px solid var(--border);box-shadow:0 2px 10px rgba(0,0,0,.05)}.msg{width:fit-content;max-width:85%;padding:10px 14px;border-radius:16px;background:#f2f2f7;font-size:15px;line-height:1.4;display:flex;flex-direction:column;white-space:pre-wrap;word-break:break-word}.msg.me{align-self:flex-end;background:var(--accent);color:#fff;border-bottom-right-radius:2px}.msg-user{font-size:10px;color:var(--accent);margin-bottom:4px;cursor:pointer;display:flex;align-items:center;gap:6px;max-width:100%;white-space:nowrap}.msg.me .msg-user{color:rgba(255,255,255,.7)}.msg-time{font-size:9px;opacity:.6;text-align:right;margin-top:4px}.bottom-hint,.picker-empty,.picker-header,.stat-box,.ta-c{text-align:center}.switch{display:inline-block;width:44px;height:24px}.bottom-hint,.slider,.slider:before{position:absolute}.switch input{opacity:0;width:0;height:0}.slider{cursor:pointer;inset:0;background-color:#ccc;transition:.2s;border-radius:24px}.slider:before{content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.2s;border-radius:50%}input:checked+.slider{background-color:var(--accent)}input:checked+.slider:before{transform:translateX(20px)}.clickable:active{opacity:.5;transform:scale(.9)}#overlay-container{position:absolute;background:rgba(0,0,0,.4);z-index:5000;align-items:center;justify-content:center;transition:opacity .3s}.panel-card{background:var(--bg);width:100%;max-width:380px;border-radius:24px;padding:24px;box-shadow:0 30px 60px rgba(0,0,0,.3);animation:.4s cubic-bezier(.16,1,.3,1) panelSlide;max-height:90vh}.guide-box,.panel-row{padding:14px;border-radius:14px;background:#f2f2f7}@keyframes panelSlide{from{transform:translateY(40px);opacity:0}to{transform:translateY(0);opacity:1}}.panel-row{display:flex;align-items:center;gap:15px;margin-bottom:12px;cursor:pointer;transition:.15s}.access-summary-card:hover,.panel-row:hover{background:#e5e5ea}.p-info{display:flex;flex-direction:column;flex:1;min-width:0}.p-label{font-size:11px;color:var(--text-mute);margin-bottom:2px}.p-value{font-size:14px;font-weight:600;color:var(--text-main);word-break:break-all}.guest-pill,.guide-box b{color:var(--accent)}.view-content{display:none}.guide-box{margin-bottom:12px;font-size:13px;line-height:1.5}.guide-box b{margin-bottom:4px;font-size:11px}.rate-limited{opacity:.5;pointer-events:none;transition:opacity .2s}.guest-replies-bar{display:flex;gap:10px;overflow-x:auto;padding:8px 0;width:100%;-webkit-overflow-scrolling:touch;scroll-snap-type:x mandatory}.guest-replies-bar::-webkit-scrollbar{display:none}.reply-block{flex:0 0 auto;padding:12px 20px;background:#f2f2f7;border:1px solid var(--border);border-radius:20px;font-weight:600;font-size:14px;white-space:nowrap;scroll-snap-align:start;cursor:pointer;transition:.1s}.reply-block:active{transform:scale(.95);background:var(--accent);color:#fff;border-color:var(--accent)}.guest-pill{display:inline-flex;align-items:center;justify-content:center;padding:2px 8px;border-radius:12px;background:rgba(0,122,255,.1);font-size:9px;font-weight:800;line-height:1;margin-left:6px;letter-spacing:.3px}.bg-f2,.stat-box{background:#f2f2f7}.msg.me .guest-pill{background:rgba(255,255,255,.15);color:#fff}.bottom-hint{bottom:30px;left:0;right:0;font-size:12px;font-weight:700;color:var(--text-mute);display:flex;align-items:center;justify-content:center;gap:8px;opacity:0;animation:1s 2s forwards fadeInHint;pointer-events:auto;cursor:pointer}@keyframes fadeInHint{to{opacity:.6}}.header-action-group{display:flex;gap:14px;align-items:center;flex-shrink:0}.chat-header-title-wrapper,.picker-user-info{display:flex;align-items:center;gap:12px;flex:1;min-width:0}.chat-header-title-wrapper .title{display:block;flex:1;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:18px;margin:0;text-align:left}.input-wrapper{position:relative;width:100%;margin-bottom:16px}#chat-empty-state,.input-lock-icon{position:absolute;pointer-events:none}.input-wrapper .input-field{margin-bottom:0;padding-right:44px}.input-lock-icon{right:16px;top:50%;transform:translateY(-50%);color:var(--text-mute)}.stat-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px}.stat-box{padding:16px;border-radius:14px}.stat-value{font-size:24px;font-weight:800;color:var(--accent);margin-bottom:4px}.stat-label{font-size:10px;font-weight:700;color:var(--text-mute)}.chat-link{color:inherit;text-decoration:underline;text-decoration-color:rgba(255,255,255,0.4);transition:color .2s}.msg:not(.me) .chat-link{color:var(--accent);text-decoration-color:rgba(0,122,255,0.3)}.chat-link:hover{opacity:.8}.history-loader{padding:10px;font-size:12px;font-weight:600}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;width:100%}.empty-state-icon{width:48px;height:48px;color:#d1d1d6;margin-bottom:16px}.empty-state-title{font-size:15px;font-weight:700;color:var(--text-main);margin-bottom:4px}.empty-state-sub{font-size:13px;font-weight:500}#chat-empty-state{inset:0;z-index:5;background:var(--bg)}.w-48{width:48px}.h-48{height:48px}.mb-24{margin-bottom:24px}.c-danger{color:var(--danger)}.c-warning{color:var(--warning)}.c-main{color:var(--text-main)}.c-accent{color:var(--accent)}.c-white{color:#fff}.mb-48{margin-bottom:48px}.h-52{height:52px}.mt-24{margin-top:24px}.w-100{width:100%}.mt-12{margin-top:12px}.bn{border:none}.mb-20{margin-bottom:20px}.fs-11{font-size:11px}.c-mute{color:var(--text-mute)}.fw-700{font-weight:700}.fs-14{font-size:14px}.fs-18{font-size:18px}.fs-22{font-size:22px}.m-0{margin:0}.p-2-8{padding:2px 8px}.fs-10{font-size:10px}.w-22{width:22px}.h-22{height:22px}.flex-1{flex:1}.flex-gap12-mt20{display:flex;gap:12px;margin-top:20px}.m-0-flex-1{margin:0;flex:1}.w-80{width:80px}.mb-16,.mb-16px{margin-bottom:16px}.flex-s0{flex-shrink:0}.dn{display:none}.w-20{width:20px}.h-20{height:20px}#chat-input,.h-52-resize{height:52px;resize:none}.c-success{color:var(--success)}#chat-input-area,.flex-gap12-pt16{display:flex;gap:12px;padding-top:16px;align-items:flex-end}.fs-24{font-size:24px}.fs-18-fw8,.fs-18-fw8-lh12-ow{font-size:18px;font-weight:800}.mt-20{margin-top:20px}.c-accent-fw8{color:var(--accent);font-weight:800}.b-dashed-accent{border:1px dashed var(--accent)}.flex-sb-aic-w100-p18-bg-br12-mb20{display:flex;justify-content:space-between;align-items:center;width:100%;padding:18px;background:#f2f2f7;border-radius:12px;margin-bottom:20px}.w-16{width:16px}.h-16{height:16px}.trans-y-m20{transform:translateY(-20px);margin-bottom:20px}.w-36{width:36px}.h-36{height:36px}.sw-15{stroke-width:1.5}.w-32{width:32px}.h-32{height:32px}.w-18{width:18px}.h-18{height:18px}.w-44{width:44px}.h-44{height:44px}.br-12{border-radius:12px}.bg-accent{background:var(--accent)}.aic-jcc{align-items:center;justify-content:center}.flex-aic-gap12-mb24{display:flex;align-items:center;gap:12px;margin-bottom:24px}.flex-col-min0,.picker-user-text{display:flex;flex-direction:column;min-width:0}.fs-18-fw8-lh12-ow{line-height:1.2;overflow:hidden;white-space:nowrap}.fs-10-fw8-tt-up-ls1{font-size:10px;font-weight:800;letter-spacing:1px}.flex-col-gap10{display:flex;flex-direction:column;gap:10px}.p-14-bg-f2-br14{padding:14px;background:#f2f2f7;border-radius:14px}.bl4-danger{border-left:4px solid var(--danger)}.fs-12-c-mute,.picker-header p{font-size:12px;color:var(--text-mute)}.mt-16{margin-top:16px}.p-12-bg-f2-br12{padding:12px;background:#f2f2f7;border-radius:12px}.mono-fs11{font-family:monospace;font-size:11px}.fs-15{font-size:15px}.flex-aic-gap10-min0-flex1{display:flex;align-items:center;gap:10px;min-width:0;flex:1}#qv-user-avatar{display:flex;align-items:center;justify-content:center;line-height:1}#chat-input{flex:1;margin:0}#send-btn{width:52px!important;height:52px!important;flex-shrink:0;padding:0;display:flex;align-items:center;justify-content:center}.access-toggle-container{display:flex;gap:8px;margin-bottom:16px;width:100%}.access-toggle-btn{flex:1;padding:14px;border-radius:12px;border:2px solid var(--border);background:#fff;cursor:pointer;text-align:center;transition:.2s;font-weight:700;color:var(--text-mute);font-size:13px}.access-toggle-btn.active{border-color:var(--accent);color:var(--accent);background:rgba(0,122,255,.05)}.access-summary-card{width:100%;background:#f2f2f7;border-radius:12px;padding:16px;display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;border:1px solid var(--border);cursor:pointer}.picker-container{display:flex;flex-direction:column;gap:16px;height:100%}.picker-add-row{display:flex;gap:8px;align-items:center}.picker-add-row .input-field{flex:1;margin-bottom:0}.picker-add-row .btn{height:52px;flex-shrink:0;width:auto;padding:0 20px}.picker-selected-list{flex:1;overflow-y:auto;padding-right:4px;max-height:300px}.picker-user-card{display:flex;align-items:center;padding:12px;gap:12px;border-bottom:1px solid var(--border);transition:.15s;background:#fff}.picker-user-card:last-child{border-bottom:none}.picker-user-avatar{width:36px;height:36px;border-radius:50%;background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:14px;flex-shrink:0}.picker-user-name{font-weight:700;font-size:14px;white-space:nowrap;overflow:hidden}.picker-user-id{font-size:10px;color:var(--text-mute);font-family:monospace}.picker-remove-btn{background:0 0;border:none;color:var(--danger);cursor:pointer;padding:8px}.picker-empty{color:var(--text-mute);padding:40px 0;font-size:13px}.picker-header{margin-bottom:16px}.picker-header h3{font-size:18px;font-weight:800;margin-bottom:4px}
    </style>
</head>
<body>
    <div id="app">
        <div id="capacity-overlay">
            <i data-lucide="users" class="w-48 h-48 mb-24 c-danger"></i>
            <h1 class="title">Network Full</h1>
            <p class="subtitle mb-48">Maximum capacity reached.</p>
            <button class="btn btn-accent" onclick="window.retryConnection()">Retry</button>
        </div>
        <div id="overlay-container">
            <div class="panel-card">
                <div id="view-hub" class="view-content active">
                    <div class="ta-c mb-24">
                        <h2 class="fs-22 fw-800" style="letter-spacing:-0.5px">Intelligence Hub</h2>
                        <p class="fs-11 c-mute fw-700 tt-up">System Resources</p>
                    </div>
                    <div class="panel-row" onclick="window.prepareMyAccount()">
                        <i data-lucide="shield-check" class="c-main"></i>
                        <div class="p-info"><span class="fw-700 fs-14">My Account</span><span class="fs-11 c-mute">Secure credentials</span></div>
                    </div>
                    <div class="panel-row" onclick="window.showOverlayView('network')">
                        <i data-lucide="activity"></i>
                        <div class="p-info"><span class="fw-700 fs-14">Protocols</span><span class="fs-11 c-mute">Network state</span></div>
                    </div>
                    <div class="panel-row" onclick="window.showOverlayView('guide')">
                        <i data-lucide="book-open"></i>
                        <div class="p-info"><span class="fw-700 fs-14">Manual</span><span class="fs-11 c-mute">Usage guide</span></div>
                    </div>
                    <button class="btn btn-accent h-52 mt-12 w-100" onclick="window.closeOverlay()">Close Hub</button>
                </div>
                <div id="view-my-account" class="view-content">
                    <h3 class="mb-20 fw-800 fs-18">My Account</h3>
                    <div class="flex-col-gap10">
                        <div class="p-info p-12-bg-f2-br12"><span class="p-label">Identity</span><span class="p-value" id="my-acc-name">---</span></div>
                        <div class="p-info p-12-bg-f2-br12"><span class="p-label">Unique ID</span><span class="p-value mono-fs11" id="my-acc-id">---</span></div>
                        <div class="p-info p-12-bg-f2-br12"><span class="p-label">Mail Node</span><span class="p-value" id="my-acc-email">---</span></div>
                        <div class="p-info p-12-bg-f2-br12"><span class="p-label">Account Type</span><span class="p-value" id="my-acc-type">---</span></div>
                    </div>
                    <button class="btn h-48 mt-24 w-100 bn bg-f2" onclick="window.showOverlayView('hub')">Back</button>
                </div>
                <div id="view-quick-view-user" class="view-content">
                    <div class="flex-aic-gap12-mb24">
                        <div class="w-44 h-44 br-12 bg-accent c-white fw-800 fs-18" id="qv-user-avatar">?</div>
                        <div class="flex-col-min0"><span id="qv-user-name" class="fs-18-fw8-lh12-ow">---</span><span id="qv-status" class="fs-10-fw8-tt-up-ls1">---</span></div>
                    </div>
                    <div class="flex-col-gap10">
                        <div class="p-info p-14-bg-f2-br14"><span class="p-label">Full Name</span><span class="p-value" id="qv-full-name">---</span></div>
                        <div class="p-info p-14-bg-f2-br14"><span class="p-label">System ID</span><span class="p-value mono-fs11" id="qv-user-id">---</span></div>
                        <div class="p-info p-14-bg-f2-br14"><span class="p-label">Created At</span><span class="p-value" id="qv-user-date">---</span></div>
                    </div>
                    <button class="btn btn-accent h-52 mt-24 w-100" onclick="window.closeOverlay()">Dismiss</button>
                </div>
                <div id="view-network" class="view-content">
                    <h3 class="mb-20 fw-800 fs-18">Network Status</h3>
                    <div class="stat-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="hub-online-count">--</div>
                            <div class="stat-label">Users Online</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="hub-uptime">00:00</div>
                            <div class="stat-label">Session Uptime</div>
                        </div>
                    </div>
                    <button class="btn h-48 mt-16 w-100 bn bg-f2" onclick="window.showOverlayView('hub')">Back</button>
                </div>
                <div id="view-guide" class="view-content">
                    <h3 class="mb-20 fw-800 fs-18">Extended Manual</h3>
                    <div style="max-height:320px;overflow-y:auto;padding-right:4px">
                        <div class="guide-box"><b>SignIn & Register</b>Use a valid email. The 6-digit code expires after 10 minutes. Passwords must be at least 8 characters.</div>
                        <div class="guide-box"><b>Guest Mode</b>Guests cannot create rooms. They can only choose from predefined messages. Name cannot be changed once set.</div>
                        <div class="guide-box"><b>Private Rooms</b>Hidden from list. Requires a password to join.</div>
                        <div class="guide-box"><b>Restricted Rooms</b>Only users explicitly allowed by the creator can enter (unless * is used).</div>
                        <div class="guide-box"><b>Links</b>URLs are automatically detected and made clickable.</div>
                    </div>
                    <button class="btn h-48 mt-16 w-100 bn bg-f2" onclick="window.showOverlayView('hub')">Back</button>
                </div>
                <div id="view-guest-info" class="view-content">
                    <h3 class="mb-20 fw-800 fs-18">Guest Limitations</h3>
                    <div class="flex-col-gap10">
                        <div class="p-info p-14-bg-f2-br14 bl4-danger"><span class="fs-14 c-danger fw-700">Room Creation</span><span class="fs-12-c-mute">Guests cannot create new rooms.</span></div>
                        <div class="p-info p-14-bg-f2-br14 bl4-danger"><span class="fs-14 c-danger fw-700">Custom Messages</span><span class="fs-12-c-mute">You can only send selected replies.</span></div>
                    </div>
                    <button class="btn btn-accent h-52 mt-24 w-100" onclick="window.closeOverlay()">Understood</button>
                </div>
                <div id="view-guest-warn" class="view-content">
                    <h3 class="mb-20 fw-800 fs-18">Guest Confirmation</h3>
                    <div class="flex-col-gap10 fs-13 c-mute mb-20" style="line-height:1.5">
                        <div class="p-info p-14-bg-f2-br14">You are about to create a <b style="color:var(--text-main)">Guest Account</b>.</div>
                        <div class="p-info p-14-bg-f2-br14 bl4-danger">Your name will be locked forever for this session.</div>
                    </div>
                    <button id="btn-confirm-guest" class="btn btn-accent h-52 w-100" onclick="window.confirmGuestLoginAction(event)">I Understand, Continue</button>
                    <button id="btn-cancel-guest" class="btn h-48 mt-12 w-100 bn bg-f2" onclick="window.closeOverlay()">Cancel</button>
                </div>
                
                <div id="view-room-settings" class="view-content">
                    <h3 class="mb-20 fw-800 fs-18">Room Configuration</h3>
                    <input id="edit-room-name" class="input-field" placeholder="Room Name">
                    <div class="flex-sb-aic-w100-p18-bg-br12-mb20">
                        <span class="fw-700">Private Room</span>
                        <label class="switch">
                            <input type="checkbox" id="edit-room-private">
                            <span class="slider"></span>
                        </label>
                    </div>
                    
                    <label class="p-label" style="margin-bottom:8px;display:block">Who can join?</label>
                    <div class="access-toggle-container">
                        <button type="button" id="edit-room-access-everyone" class="access-toggle-btn active" onclick="window.handleAccessToggle('edit-room', 'everyone')">Everyone</button>
                        <button type="button" id="edit-room-access-specific" class="access-toggle-btn" onclick="window.handleAccessToggle('edit-room', 'specific')">Specific People</button>
                    </div>
                    
                    <div id="edit-room-access-summary" class="access-summary-card dn" onclick="window.openAccessManager('edit-room')">
                         <span class="c-main">Everyone can join</span>
                         <i data-lucide="chevron-right" class="w-16 h-16"></i>
                    </div>

                    <input id="edit-room-pass" type="password" class="input-field" placeholder="New Password (optional)">
                    <button class="btn btn-accent h-52 w-100" onclick="window.saveRoomSettings(event)">Save Changes</button>
                    <button class="btn h-48 mt-12 w-100 bn bg-f2" onclick="window.closeOverlay()">Cancel</button>
                </div>

                <div id="view-access-manager" class="view-content">
                    <div class="picker-container">
                        <div class="picker-header">
                            <h3>Select Users</h3>
                            <p>Paste a User ID and press Add.</p>
                        </div>
                        
                        <div class="picker-add-row">
                            <input id="picker-id-input" class="input-field" placeholder="Paste User ID...">
                            <button class="btn btn-accent" onclick="window.addUserById()">Add</button>
                        </div>
                        
                        <label class="p-label">Added Users (<span id="picker-count">0</span>)</label>
                        <div id="picker-selected-list" class="picker-selected-list">
                             <div class="picker-empty">No users added yet.</div>
                        </div>
                        
                        <button class="btn btn-accent h-52 w-100 mt-12" onclick="window.closeAccessManager()">Done</button>
                    </div>
                </div>
                
            </div>
        </div>
        <div id="block-overlay">
            <i data-lucide="copy" class="w-48 h-48 mb-24 c-warning"></i>
            <h1 class="title">Active Session</h1>
            <p class="subtitle mb-48">HRN Chat is open in another tab.</p>
            <button class="btn btn-accent" onclick="window.forceClaimMaster()">Use Here</button>
            <button class="btn mt-12 bn bg-f2" onclick="window.closeTabAttempt()">Close Tab</button>
        </div>
        <div id="offline-screen">
            <i data-lucide="wifi-off" class="w-48 h-48 mb-24 c-main"></i>
            <h1 class="title">No Signal</h1>
            <p class="subtitle mb-48">Waiting for internet...</p>
        </div>
        <div id="loader-overlay" class="active">
            <div class="spinner"></div>
            <span id="loader-text" class="loader-text">Initializing...</span>
        </div>
        <div id="toast-container"></div>
        <div id="scr-start" class="screen active center-content">
            <div class="start-icon-container trans-y-m20"><i data-lucide="shield" class="w-36 h-36 sw-15 c-accent"></i></div>
            <h1 class="title">HRN Chat</h1>
            <p class="subtitle">Secure Network 2026</p>
            <button class="btn btn-accent auth-btn mb-16" onclick="window.nav('scr-login')">Sign In</button>
            <button class="btn auth-btn" onclick="window.nav('scr-register')">Create Account</button>
            <div id="guest-swipe-hint" class="bottom-hint" onclick="window.nav('scr-guest', 'left')"><i data-lucide="chevron-left" class="w-16 h-16"></i><span>Swipe for Guest Access</span></div>
        </div>
        <div id="scr-guest" class="screen center-content">
            <i data-lucide="user" class="w-32 h-32 c-accent mb-16"></i>
            <h1 class="title">Guest Access</h1>
            <p class="subtitle">Persistent Session</p>
            <div class="input-wrapper">
                <input id="g-name" class="input-field" placeholder="Enter Name (Permanent)">
                <i data-lucide="lock" class="input-lock-icon dn w-18 h-18"></i>
            </div>
            <button class="btn btn-accent" onclick="window.handleGuestLogin(event)">Enter Lobby</button>
            <div id="guest-back-hint" class="bottom-hint" onclick="window.nav('scr-start', 'right')"><i data-lucide="chevron-left" class="w-16 h-16"></i><span>Back to Home</span></div>
        </div>
        <div id="scr-login" class="screen center-content">
            <h1 class="title">Sign In</h1><p class="subtitle">Access Secure Room</p>
            <input id="l-email" class="input-field" type="email" placeholder="Email Address">
            <input id="l-pass" type="password" class="input-field" placeholder="Password">
            <button class="btn btn-accent auth-btn" onclick="window.handleLogin(event)">Access</button>
            <button class="btn bn mt-12" onclick="window.nav('scr-start')">Back</button>
        </div>
        <div id="scr-register" class="screen center-content">
            <h1 class="title">Sign Up</h1><p class="subtitle">Join the Network</p>
            <input id="r-name" class="input-field" placeholder="Full Name">
            <input id="r-email" class="input-field" type="email" placeholder="Email Address">
            <input id="r-pass" class="input-field" type="password" placeholder="Password (min. 8 chars)">
            <button class="btn btn-accent auth-btn" onclick="window.handleRegister(event)">Verify</button>
            <button class="btn bn mt-12" onclick="window.nav('scr-start')">Back</button>
        </div>
        <div id="scr-verify" class="screen center-content">
            <h1 class="title">Verify</h1><p class="subtitle">Confirm Identity</p>
            <input id="v-code" class="input-field ta-c fs-24" placeholder="000000">
            <button class="btn btn-accent" onclick="window.handleVerify(event)">Confirm</button>
            <div id="v-timer" class="mt-20 c-accent-fw8">10:00</div>
        </div>
        <div id="scr-lobby" class="screen">
            <div class="header">
                <div class="flex-aic-gap10-min0-flex1">
                    <h1 class="title fs-22 m-0" style="cursor:pointer" onclick="window.refreshLobby()">Rooms</h1>
                    <span class="online-indicator p-2-8 fs-10"><div class="dot"></div><span class="live-count">--</span></span>
                </div>
                <div class="header-action-group">
                    <span class="clickable" onclick="window.openHub()"><i data-lucide="info" class="w-22 h-22"></i></span>
                    <span class="clickable" id="icon-plus-lobby" onclick="window.nav('scr-create')"><i data-lucide="plus" class="w-22 h-22"></i></span>
                    <span class="clickable" onclick="window.handleLogout(event)"><i data-lucide="log-out" class="w-22 h-22"></i></span>
                </div>
            </div>
            <input id="search-bar" class="input-field" placeholder="Filter secure rooms..." oninput="window.filterRooms()">
            <div id="room-list" class="flex-1 ovy-auto"></div>
            <div class="flex-gap12-mt20"><input id="join-id" class="input-field m-0-flex-1" placeholder="Direct ID"><button class="btn btn-accent w-80" onclick="window.joinPrivate()">Join</button></div>
        </div>
        <div id="scr-chat" class="screen">
            <div class="header mb-16">
               <div class="chat-header-title-wrapper">
                    <span class="clickable flex-s0" onclick="window.leaveChat()"><i data-lucide="chevron-left" class="w-24 h-24"></i></span>
                    <h2 id="chat-title" class="title">---</h2>
                </div>
                <div class="header-action-group">
                    <span class="clickable dn" id="room-settings-icon" onclick="window.openRoomSettings()"><i data-lucide="settings" class="w-22 h-22"></i></span>
                    <span class="clickable dn" id="guest-info-chat" onclick="window.showGuestInfo()"><i data-lucide="info" class="w-22 h-22"></i></span>
                    <span class="clickable" id="copy-btn-wrapper" onclick="window.copyId()"><i data-lucide="copy" id="icon-copy-chat" class="w-22 h-22"></i><i data-lucide="check" id="icon-check-chat" class="w-22 h-22 dn c-success"></i></span>
                </div>
            </div>
            <div id="room-access-info" class="room-access-info dn"></div>
            <div id="chat-messages" class="pos-rel">
                <div id="chat-empty-state" class="empty-state">
                    <i data-lucide="message-circle" class="empty-state-icon"></i>
                    <div class="empty-state-title">No messages yet</div>
                    <div class="empty-state-sub">Be the first to say something.</div>
                </div>
            </div>
            <div id="chat-input-area">
                <textarea id="chat-input" class="input-field" placeholder="Secure message..."></textarea>
                <div id="guest-replies" class="guest-replies-bar dn">
                    <div class="reply-block" onclick="window.sendGuestReply(event, 'Hello!')">Hello!</div>
                    <div class="reply-block" onclick="window.sendGuestReply(event, 'How is it going?')">How is it going?</div>
                    <div class="reply-block" onclick="window.sendGuestReply(event, 'Good to be here.')">Good to be here.</div>
                    <div class="reply-block" onclick="window.sendGuestReply(event, 'I agree.')">I agree.</div>
                </div>
                <button id="send-btn" class="btn btn-accent" onclick="window.sendMsg(event)"><i data-lucide="arrow-up" class="w-20 h-20"></i></button>
            </div>
        </div>
        <div id="scr-create" class="screen center-content">
            <h1 class="title">Create</h1><p class="subtitle">Deploy New Room</p>
            <input id="c-name" class="input-field" placeholder="Room Name">
            <input id="c-pass" class="input-field" type="password" placeholder="Passkey (Required for Private)">
            <div class="flex-sb-aic-w100-p18-bg-br12-mb20"><span class="fw-700">Private Room</span><label class="switch"><input type="checkbox" id="c-private" onchange="window.handlePrivateToggle()"><span class="slider"></span></label></div>
            
            <label class="p-label" style="margin-bottom:8px;display:block">Who can join?</label>
            <div class="access-toggle-container">
                <button type="button" id="c-access-everyone" class="access-toggle-btn active" onclick="window.handleAccessToggle('c', 'everyone')">Everyone</button>
                <button type="button" id="c-access-specific" class="access-toggle-btn" onclick="window.handleAccessToggle('c', 'specific')">Specific People</button>
            </div>
            
            <div id="c-access-summary" class="access-summary-card dn" onclick="window.openAccessManager('c')">
                 <span class="c-main">Everyone can join</span>
                 <i data-lucide="chevron-right" class="w-16 h-16"></i>
            </div>

            <button class="btn btn-accent mt-16" onclick="window.handleCreate(event)">Deploy</button>
            <button class="btn bn mt-12" onclick="window.nav('scr-lobby')">Cancel</button>
        </div>
        <div id="scr-gate" class="screen center-content">
            <h1 class="title">Encrypted</h1><p class="subtitle">Authentication Required</p>
            <input id="gate-pass" type="password" class="input-field ta-c" placeholder="Passkey">
            <button class="btn btn-accent" onclick="window.submitGate(event)">Decrypt</button>
            <button class="btn bn mt-12" onclick="window.nav('scr-lobby')">Abort</button>
        </div>
        <div id="scr-success" class="screen center-content">
            <h1 class="title">Room Created</h1><p class="subtitle">Deployment Successful</p>
            <div id="s-id" class="input-field ta-c c-accent-fw8 b-dashed-accent" onclick="window.copySId()">---</div>
            <button class="btn btn-accent" onclick="window.enterCreated()">Enter</button>
        </div>
    </div>
    <script type="module">
        import { startChatApp } from './assets/test.js';
        startChatApp({
            maxUsers: 475,
            maxMessages: 15,
            rateLimitMs: 1000,
            historyLoadLimit: 10
        });
    </script>
</body>
</html>
